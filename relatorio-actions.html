<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Relatório do Build Automático – GitHub Actions</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="styles/relatorio-styles.css">
</head>
<body>
  <div class="header">
    <h1>Relatório do Build Automático – GitHub Actions</h1>
    <p>Relatório feito por <a href="https://github.com/pedroalim/mini-docker-devops" target="_blank">Pedro Ramos de Lima</a></p>
    <p>Este relatório documenta o processo de build automático do Docker para o mini site explicativo, utilizando GitHub Actions. A seguir, estão os detalhes da configuração inicial, logs do processo e quaisquer tentativas de correção realizadas.</p>
  </div>

  <div class="relatorio">
    <h2>#1 configuracao inicial do site / docker</h2>
    <p>Principais arquivos da atividade foram subidos no github com esse comit, incluindo os principais do site como html e a parte de css. como também os arquivos do Docker e por ultimo as configurações de workflow do github actions.</p>
    <p class="status"><b>Status:</b> <span class="sucesso">Sucesso</span></p>

    <h3>Log Principal:</h3>
    <pre>
      Run docker build -t teste-mini-site .
      #0 building with "default" instance using docker driver
      
      #1 [internal] load build definition from Dockerfile
      #1 transferring dockerfile: 492B done
      #1 DONE 0.0s

      #2 [auth] library/nginx:pull token for registry-1.docker.io
      #2 DONE 0.0s

      #3 [internal] load metadata for docker.io/library/nginx:alpine
      #3 DONE 0.5s

      #4 [internal] load .dockerignore
      #4 transferring context: 2B done
      #4 DONE 0.0s

      #5 [internal] load build context
      #5 transferring context: 44.43kB 0.0s done
      #5 DONE 0.0s

      #6 [1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
      ...
      #6 DONE 1.8s
      
      #7 [2/2] COPY . /usr/share/nginx/html
      #7 DONE 0.0s

      #8 exporting to image
      #8 exporting layers
      #8 exporting layers 0.4s done
      #8 writing image sha256:29adffd9ce3ed723212fda8b78f10fdddcf45e03f0a79fd3c7bbc3ee371c1919 done
      #8 naming to docker.io/library/teste-mini-site done
      #8 DONE 0.4s
    </pre>
    
    <div class="tentativas">
      <h3>Resumo das tentativas de correção:</h3>
      
      <p>Não houveram tentativas de correção, funcionou de primeira.</p>
      <!--
      <ul>
        <li>Commit 1: Ajuste nome do arquivo Dockerfile</li>
        <li>Commit 2: Corrigida sintaxe da instrução <code>COPY</code> no Dockerfile</li>
        <li>Commit 3: Corrigido caminho do arquivo style.css</li>
      </ul>
        -->
    </div>
  </div>

  <div class="relatorio">
    <h2>#2 adicionando informacoes / action para publicar site</h2>
    <p>Nesse commit foi incluído mais um arquivo de workflow (deploy-pages.yml) dessa vez para que ao realizar um push no repositório, ele copie o arquivo <i>relatorio-actions.html</i> e suba como um site do github pages automaticamente.</p>
    <p class="status"><b>Status:</b> <span class="sucesso">Sucesso</span></p>

    <h3>Log <i>deploy-pages</i>:</h3>
    <pre>
      <b>>SET UP JOB</b>
      Current runner version: '2.329.0'
      Runner Image Provisioner
      Operating System
      Runner Image
      GITHUB_TOKEN Permissions
      Secret source: Actions
      Prepare workflow directory
      Prepare all required actions
      Getting action download info
      Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
      Download action repository 'actions/upload-pages-artifact@v3' (SHA:56afc609e74202658d3ffba0e8f6dda462b719fa)
      Getting action download info
      Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
      Complete job name: build

      <b>>PREPARE DEPLOYMENT ARTIFACT</b>
      Run mkdir _site
      mkdir _site
      cp relatorio-actions.html _site/index.html

      <b>>UPLOAD ARTIFACT FOR DEPLOYMENT</b>
      Run actions/upload-pages-artifact@v3
      Run echo ::group::Archive artifact
      Archive artifact
      Run actions/upload-artifact@v4
      With the provided path, there will be 1 file uploaded
      Artifact name is valid!
      Root directory input is valid!
      Beginning upload of artifact content to blob storage
      Uploaded bytes 1558
      Finished uploading artifact content to blob storage!
      SHA256 digest of uploaded artifact zip is 3c56d61636dc91e7652557a1655d2d57b0a7fe62faeb2cf232b1616003196927
      Finalizing artifact upload
      Artifact github-pages.zip successfully finalized. Artifact ID 4455418403
      Artifact github-pages has been successfully uploaded! Final size is 1558 bytes. Artifact ID is 4455418403
      Artifact download URL: https://github.com/pedroalim/mini-docker-devops/actions/runs/19051935451/artifacts/4455418403
    </pre>

    <h3>Log <i>docker-build</i>:</h3>
    <pre>
      Run docker build -t teste-mini-site .
      #0 building with "default" instance using docker driver
      
      #1 [internal] load build definition from Dockerfile
      #1 transferring dockerfile: 492B done
      #1 DONE 0.0s

      #2 [auth] library/nginx:pull token for registry-1.docker.io
      #2 DONE 0.0s

      #3 [internal] load metadata for docker.io/library/nginx:alpine
      #3 DONE 0.5s

      #4 [internal] load .dockerignore
      #4 transferring context: 2B done
      #4 DONE 0.0s

      #5 [internal] load build context
      #5 transferring context: 44.43kB 0.0s done
      #5 DONE 0.0s

      #6 [1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
      ...
      #6 DONE 1.8s
      
      #7 [2/2] COPY . /usr/share/nginx/html
      #7 DONE 0.0s

      #8 exporting to image
      #8 exporting layers
      #8 exporting layers 0.4s done
      #8 writing image sha256:29adffd9ce3ed723212fda8b78f10fdddcf45e03f0a79fd3c7bbc3ee371c1919 done
      #8 naming to docker.io/library/teste-mini-site done
      #8 DONE 0.4s
    </pre>
    
    <div class="tentativas">
      <h3>Resumo das tentativas de correção:</h3>
      <p>Subiu corretamente com sucesso, porém faltando os arquivos <i>styles.css</i></p>
    </div>
  </div>

  <div class="relatorio">
    <h2>#3 adicionado 2 linhas em deploy-pages</h2>
    <p>Aqui os resultados foram os mesmos, porém dessa vez junto </p>
    <p class="status"><b>Status:</b> <span class="sucesso">Sucesso</span></p>

    <h3>Log <i>deploy-pages</i>:</h3>
    <pre>
      <b>>SET UP JOB</b>
      Current runner version: '2.329.0'
      Runner Image Provisioner
      Operating System
      Runner Image
      GITHUB_TOKEN Permissions
      Secret source: Actions
      Prepare workflow directory
      Prepare all required actions
      Getting action download info
      Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
      Download action repository 'actions/upload-pages-artifact@v3' (SHA:56afc609e74202658d3ffba0e8f6dda462b719fa)
      Getting action download info
      Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
      Complete job name: build

      <b>>PREPARE DEPLOYMENT ARTIFACT</b>
      Run mkdir _site
      mkdir _site
      cp relatorio-actions.html _site/index.html
      cp -r styles _site/
      cp -r imgs _site/

      <b>>UPLOAD ARTIFACT FOR DEPLOYMENT</b>
      Run actions/upload-pages-artifact@v3
      Run echo ::group::Archive artifact
      Archive artifact
      Run actions/upload-artifact@v4
      With the provided path, there will be 1 file uploaded
      Artifact name is valid!
      Root directory input is valid!
      Beginning upload of artifact content to blob storage
      Uploaded bytes 3687
      Finished uploading artifact content to blob storage!
      SHA256 digest of uploaded artifact zip is 0ff657932c14699952c8bcb773c0583d51679e4ec72a3fe024e3e0e3c2578c45
      Finalizing artifact upload
      Artifact github-pages.zip successfully finalized. Artifact ID 4455451570
      Artifact github-pages has been successfully uploaded! Final size is 3687 bytes. Artifact ID is 4455451570
      Artifact download URL: https://github.com/pedroalim/mini-docker-devops/actions/runs/19052023405/artifacts/4455451570
    </pre>

    <h3>Log <i>docker-build</i>:</h3>
    <pre>
      Run docker build -t teste-mini-site .
      #0 building with "default" instance using docker driver
      
      #1 [internal] load build definition from Dockerfile
      #1 transferring dockerfile: 492B done
      #1 DONE 0.0s

      #2 [auth] library/nginx:pull token for registry-1.docker.io
      #2 DONE 0.0s

      #3 [internal] load metadata for docker.io/library/nginx:alpine
      #3 DONE 0.5s

      #4 [internal] load .dockerignore
      #4 transferring context: 2B done
      #4 DONE 0.0s

      #5 [internal] load build context
      #5 transferring context: 44.43kB 0.0s done
      #5 DONE 0.0s

      #6 [1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
      ...
      #6 DONE 1.8s
      
      #7 [2/2] COPY . /usr/share/nginx/html
      #7 DONE 0.0s

      #8 exporting to image
      #8 exporting layers
      #8 exporting layers 0.4s done
      #8 writing image sha256:29adffd9ce3ed723212fda8b78f10fdddcf45e03f0a79fd3c7bbc3ee371c1919 done
      #8 naming to docker.io/library/teste-mini-site done
      #8 DONE 0.4s
    </pre>
    
    <div class="tentativas">
      <h3>Resumo das tentativas de correção:</h3>
      <p>Subiu corretamente com sucesso, agora com todos os arquivos corretos no <i>github pages</i> incluindo os arquivos de css. Segue o link da página do github pages.</a></p>
    </div>
  </div>

</body>
</html>